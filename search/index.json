[{"content":"1panel + gitea + docker + cloudflare + 反代 教程 准备 服务器\nCloudflare账号\n域名\nSSH 连接到服务器,安装 1panel RedHat/CentOS 1 curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh \u0026amp;\u0026amp; sh quick_start.sh Ubuntu 1 curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh \u0026amp;\u0026amp; sudo bash quick_start.sh Debian 1 curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh \u0026amp;\u0026amp; bash quick_start.sh openEuler/ 其他系统 1. 安装 docker 1 curl -sSL https://linuxmirrors.cn/docker.sh 2. 安装 1Panel 1 curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh \u0026amp;\u0026amp; sh quick_start.sh 浏览器进入 1panel 中,找到商店管理 安装 Mysql 版本5.7+ 不要打开外部访问 Gitea 安装与 SSH 配置 1. 安装 Gitea 打开外部端口访问, 域名可访问后记得关上\nSSH 端口建议： 推荐使用默认端口 22，若选择其他端口（如 222 ），后续 Git 操作需使用格式： git@XX:222 若可接受此格式可跳过修改到此处 点击跳转 2. 修改 SSH 配置文件 使用编辑器打开配置文件： 1 sudo vi /etc/ssh/sshd_config 或者在1panel 系统\u0026gt;文件中打开(建议)\n找到并修改端口参数,取消注释 # Port 22 改为 Port 2223\nvim 操作说明：\n按 i 进入编辑模式\n删除 # 取消注释\n修改端口号后，按 ESC → 输入 :wq 保存退出\n3. 重启 SSH 服务 1 sudo systemctl restart sshd 3. Gitea 配置 跳过端口修改 默认是 ip:3000 以下部分可以不用修改 确认信息 开启电子邮件通知 这部分可参考 知乎-如何开启QQ SMTP 可使用第三方 Email Sending Service 创建管理员账号 打开Cloudflare 如果域名商有免费SSL证书, 那就用 ,跳过这步,主要是泛域名太贵,cf可以免费,如果你只搭建Gitea那么推荐到原服务商获取证书\n添加域 修改DNS 按提示修改服务商 默认DNS为CF的DNS 解析域名,由于SSH的局限性不使用代理,打开代理后SSH连接到的是代理主机 SSL证书 创建证书 -\u0026gt; 下载证书 修改加密为完全(严格) 导入证书 拿到证书后回到1panel 点击 网站-\u0026gt;证书-\u0026gt;上传证书 填写信息或导入 反向代理 然后点击 网站 -\u0026gt; 创建 , 选择反向代理 开启HTTPS 确定后点击网站 配置 开启HTTPS, 关闭Gitea外部端口访问,只允许域名访问\n到此结束 可以通过域名正常访问了,也可以通过 SSH 拉取推送\n测试一下 添加公钥 本地命令行输入 1 SSH -T git@域名 如果出现以下返回就没问题了 Hi there, XXXX! You've successfully authenticated with the key named Gitea, but Gitea does not provide shell access.\n本文原载于bangbang.com，复制请保留原文出处。\n","date":"2025-04-24T15:55:12+08:00","image":"https://lsky.bangbang.site/Gu2K2q.png","permalink":"http://localhost:1313/p/%E6%90%AD%E5%BB%BAgitea/","title":"搭建Gitea"}]